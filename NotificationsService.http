@baseUrl = http://localhost:30577
# @baseUrl = https://apiqa.solmar.com
@admin_jwt = Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQHNvbG1hci5jb20iLCJnaXZlbl9uYW1lIjoiYWRtaW5Ac29sbWFyLmNvbSIsInN1YiI6IjZmYzY4MmY1LWJlNGQtNDc3Zi1hYmRhLTczZGZhM2Q2OWU5MyIsInJvbGUiOiJBZG1pbmlzdHJhZG9yU2lzdGVtYSIsIm5iZiI6MTc2NDU0NTIzMCwiZXhwIjoxNzY1MTUwMDMwLCJpYXQiOjE3NjQ1NDUyMzAsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0OjcwMDEiLCJhdWQiOiJodHRwczovL2xvY2FsaG9zdDo3MDAxIn0.SIoTadGvZ-J969lcilCYOLCLhCsDw-LY7Xrc2V137VumgG3njZi0NJaQUm4ooUvLXGJzPs0wKIhEEqYOmzsaoQ
@cliente_jwt = Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImFkbWluQHNvbG1hci5jb20iLCJnaXZlbl9uYW1lIjoiQWRtaW4gU29sbWFyIiwic3ViIjoiMzZmZDAwN2ItMWQ0ZS00MWU1LWIwODItYTljN2NmNDYzMTg4IiwiQXNwTmV0LklkZW50aXR5LlNlY3VyaXR5U3RhbXAiOiJaNTNMNVlOUERWTjJPVVg1TEYzUlBWNEtHV0RNNDU1WSIsInJvbGUiOiJBZG1pbmlzdHJhZG9yU2lzdGVtYSIsInBlcm1pc3Npb24iOlsicmVzZXJ2YXM6bGVlciIsInJlc2VydmFzOmNyZWFyIiwicmVzZXJ2YXM6Y2FuY2VsYXIiLCJmaW5hbnphczp2ZXJfcmVwb3J0ZXMiLCJhZG1pbjpnZXN0aW9uYXJfdXN1YXJpb3MiLCJhZG1pbjpnZXN0aW9uYXJfcm9sZXMiXSwibmJmIjoxNzY2NDg2ODU4LCJleHAiOjE3NjcwOTE2NTgsImlhdCI6MTc2NjQ4Njg1OCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6NzAwMSIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjcwMDEifQ.xX0v1sUOj5NYGRsLmLOi6N0L-SuZ5BvmKnC5RFOEt_g_D_NBTRi3xis3Auco8NA2R9V-cbF3LuRptOs5PcBJDA
@notificationId = AQUÍ_VA_UN_ID_DE_NOTIFICACION

###
# =====================================================
# Notifications Controller (/notifications)
# =====================================================

# @name getMyNotifications
# Obtiene las notificaciones del usuario autenticado.
GET {{baseUrl}}/notifications/me
Authorization: {{cliente_jwt}}

###

# @name getMyUnreadNotifications
# Obtiene las notificaciones no leídas del usuario.
GET {{baseUrl}}/notifications/me/unread
Authorization: {{cliente_jwt}}

###

# @name markAsRead
# Marca una notificación como leída.
POST {{baseUrl}}/notifications/{{notificationId}}/mark-as-read
Authorization: {{cliente_jwt}}

###

# @name sendNotification
# Envía una notificación a un usuario.
# Roles permitidos: AdministradorSistema, GerenteHotel
POST {{baseUrl}}/notifications/send
Content-Type: application/json
Authorization: {{admin_jwt}}

{
  "usuarioId": "AQUÍ_VA_EL_USER_ID_DESTINO",
  "mensaje": "Tu reserva ha sido confirmada.",
  "tipo": "ConfirmacionReserva"
}



# Archivo de peticiones para NotificationsService a través del YARP Proxy
# =================================================================
# La ruta del controlador ha sido modificada para coincidir con la
# ruta que el YARP Proxy está enviando al servicio (sin el prefijo /api/).
#
# Estructura de la URL:
# {{baseUrl}}/notifications/{endpoint}
# =================================================================

@pushNotificationId = AQUÍ_VA_UN_ID_DE_PUSH_NOTIFICACION

###
# =====================================================
# Email Notifications
# =====================================================

# @name sendTemplatedEmail
# Envía un correo electrónico utilizando una plantilla HTML.
# Roles permitidos: AdministradorSistema, GerenteHotel
POST {{baseUrl}}/notifications/send-templated-email
Content-Type: application/json
Authorization: {{admin_jwt}}

{
  "toEmail": "destinatario@ejemplo.com",
  "templateName": "ReservationConfirmed", // O PaymentProcessed, Promotion
  "subject": "Confirmación de tu Reserva Solmar", // Opcional
  "data": {
    "UserName": "Juan Pérez",
    "HotelName": "Hotel Solmar Playa",
    "ReservationCode": "SM12345",
    "CheckInDate": "2025-12-25",
    "CheckOutDate": "2025-12-30"
  }
}

###
# =====================================================
# Push Notifications
# =====================================================

# @name sendPushNotification
# Crea y envía una notificación push.
# Roles permitidos: AdministradorSistema, GerenteHotel
POST {{baseUrl}}/notifications/send-push
Content-Type: application/json
Authorization: {{admin_jwt}}

{
  "userId": "AQUÍ_VA_EL_USER_ID_DESTINO",
  "category": "Transaccional",
  "type": "reservation_confirmed",
  "title": "Tu reserva ha sido confirmada!",
  "description": "Hemos confirmado tu reserva para el hotel X en la fecha Y.",
  "origin": "ReservationsService",
  "deepLink": "solmarapp://reservations/123"
}

###

# @name getMyPushNotifications
# Obtiene todas las notificaciones push del usuario autenticado.
GET {{baseUrl}}/notifications/me/push
Authorization: {{cliente_jwt}}

###

# @name getMyUnreadPushNotifications
# Obtiene las notificaciones push no leídas del usuario autenticado.
GET {{baseUrl}}/notifications/me/push/unread
Authorization: {{cliente_jwt}}

###

# @name markPushNotificationAsRead
# Marca una notificación push como leída.
POST {{baseUrl}}/notifications/push/{{pushNotificationId}}/mark-as-read
Authorization: {{cliente_jwt}}

###

# @name markPushNotificationAsPinned
# Marca una notificación push como anclada.
POST {{baseUrl}}/notifications/push/{{pushNotificationId}}/mark-as-pinned
Authorization: {{cliente_jwt}}

###

# @name unmarkPushNotificationAsPinned
# Desmarca una notificación push como anclada.
POST {{baseUrl}}/notifications/push/{{pushNotificationId}}/mark-as-pinned?pin=false
Authorization: {{cliente_jwt}}

###



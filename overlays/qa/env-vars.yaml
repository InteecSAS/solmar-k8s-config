# k8s/overlays/qa/env-vars.yaml
# Este archivo contiene las variables de entorno específicas para el entorno de QA.
# DEBES REEMPLAZAR LOS VALORES DE EJEMPLO CON TUS VALORES REALES DE QA.

apiVersion: apps/v1
kind: Deployment
metadata:
  name: auth-service # Parche para AuthService
spec:
  template:
    spec:
      containers:
        - name: auth-service
          env:
            - name: ConnectionStrings__DefaultConnection
              value: "Server=SERVER_QA;Database=BBDD_QA;User Id=USER_QA;Password=PASSWORD_QA;TrustServerCertificate=True;"
            - name: Logging__LogLevel__Default
              value: "Debug" # Nivel de log más verboso para QA
            # Añade aquí cualquier otra variable de entorno específica de AuthService para QA
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: reservas-service # Parche para ReservasService
spec:
  template:
    spec:
      containers:
        - name: reservas-service
          env:
            - name: ConnectionStrings__DefaultConnection
              value: "Server=SERVER_QA;Database=BBDD_QA;User Id=USER_QA;Password=PASSWORD_QA;TrustServerCertificate=True;"
            - name: SomeOtherSetting__ReservasQA
              value: "QA_Value_for_Reservas"
            # Añade aquí cualquier otra variable de entorno específica de ReservasService para QA
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: finanzas-service # Parche para FinanzasService
spec:
  template:
    spec:
      containers:
        - name: finanzas-service
          env:
            - name: ConnectionStrings__DefaultConnection
              value: "Server=SERVER_QA;Database=BBDD_QA;User Id=USER_QA;Password=PASSWORD_QA;TrustServerCertificate=True;"
            # Añade aquí cualquier otra variable de entorno específica de FinanzasService para QA
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: notifications-service # Parche para NotificationsService
spec:
  template:
    spec:
      containers:
        - name: notifications-service
          env:
            - name: ConnectionStrings__DefaultConnection
              value: "Server=SERVER_QA;Database=BBDD_QA;User Id=USER_QA;Password=PASSWORD_QA;TrustServerCertificate=True;"
            # Añade aquí cualquier otra variable de entorno específica de NotificationsService para QA
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: yarp-proxy # Parche para YarpProxy
spec:
  template:
    spec:
      containers:
        - name: yarp-proxy
          env:
            - name: ReverseProxy__Clusters__auth-cluster__Destinations__auth-service__Address
              value: "http://auth-service.default.svc.cluster.local:8080/"
            - name: ReverseProxy__Clusters__reservas-cluster__Destinations__reservas-service__Address
              value: "http://reservas-service.default.svc.cluster.local:8080/"
            - name: ReverseProxy__Clusters__finanzas-cluster__Destinations__finanzas-service__Address
              value: "http://finanzas-service.default.svc.cluster.local:8080/"
            - name: ReverseProxy__Clusters__notifications-cluster__Destinations__notifications-service__Address
              value: "http://notifications-service.default.svc.cluster.local:8080/"
            # Añade aquí cualquier otra variable de entorno específica de YarpProxy para QA